#!/bin/python3

import bucseTests


bucseTests.parseArgs()


bucseTests.mountDirs()

fileName = "__TESTDIR__/testfile.bin"

fd, fdMirror = bucseTests.mirrorCreate(fileName)
print([fd, fdMirror])
bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 70552, 0)
bucseTests.mirrorOp(fileName, fd, fdMirror, "flush", 0, 0)
bucseTests.mirrorClose(fileName, fd, fdMirror)

#fd, fdMirror = bucseTests.mirrorOpen(fileName)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 12288, 24576)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 730, 15654)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 172038, 16384)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 131072, 36864)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 24576, 167936)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 3639, 20937)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 128357, 24576)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 165294, 35995)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 94208, 81920)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 12288, 61440)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 28672, 176128)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 8192, 73728)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 61440, 0)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 29938, 11048)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 131072, 0)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 540, 146916)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 16225, 147456)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 20480, 180224)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 24576, 155648)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 36864, 118784)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 65536, 4096)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 4096, 0)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "flush", 0, 0)
#bucseTests.mirrorClose(fileName, fd, fdMirror)

#fd, fdMirror = bucseTests.mirrorOpen(fileName)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 1474, 100926)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 74260, 102400)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 89380, 154728)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 748, 97556)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 190013, 98304)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 230648, 111007)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 84239, 272237)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 71539, 129248)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 47740, 349459)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 24576, 286720)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 2721, 271711)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 34716, 274432)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 49152, 155648)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 3395, 344765)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 17436, 348160)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 45056, 352256)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 11354, 369442)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 12288, 376832)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 8192, 163840)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 131072, 172032)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 3102, 365538)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 121528, 368640)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 2588, 345572)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 75595, 348160)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 8192, 393216)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 2316, 362228)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 202551, 364544)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "flush", 0, 0)
#bucseTests.mirrorClose(fileName, fd, fdMirror)

fd, fdMirror = bucseTests.mirrorOpen(fileName)
bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 597, 540075)
#bucseTests.mirrorOp(fileName, fd, fdMirror, "write", 11060, 540672)
bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 12288, 528384)
bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 28672, 499712)
bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 131072, 147456)
bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 90112, 409600)
bucseTests.mirrorOp(fileName, fd, fdMirror, "read", 131072, 278528)
bucseTests.mirrorOp(fileName, fd, fdMirror, "flush", 0, 0)
bucseTests.mirrorClose(fileName, fd, fdMirror)

bucseTests.verifyWithMirror()
bucseTests.testCleanup()
